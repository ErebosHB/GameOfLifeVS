<html>
    <head>
        <title>GameOfLife</title>
        <link rel="stylesheet" href="GameOfLife.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
        <div id = "button">
            <button class="taste">Löschen</button>
            <button class="taste">Zufällig</button>
            <button class="taste">Fortsetzen</button>
        </div>
        <table id="field"></table>
        <script>
            var size =50;
            var cells;
            var htmlElements;
            
            var EMPTY = 0;
            var ALIVE = 1;

            function createField(){

                htmlElements = [];
                cells = [];
                var table = document.getElementById('field');
                
                for( var x = 0; x < size; x++){
                var tr = document.createElement('tr');
                var tdElements = [];
                cells.push(new Array(size).fill(EMPTY));
                htmlElements.push(tdElements);
                table.appendChild(tr);
                
                for(var y = 0; y < size; y++){
                    var td = document.createElement('td');
                    tdElements.push(td);
                    tr.appendChild(td);

                }
            }  
        }

            function draw(){
                for(var x = 0; x < size; x++){
                    for(var y = 0; y < size; y++){
                        htmlElements[x][y].setAttribute('class', 'cell'+ (cells[x][y] == 1 ? 'filled' : 'empty'));
                    }
                }
            }
 
            function nachbarnZaehlen(x, y){
                var zaehlen = 0;
                for(var i = -1; i < 2; i++){
                    for(var j = -1; j < 2; j++){
                        var sx = (x + i + size)%size;
                        var ry = (y + j + size)%size;
                        zaehlen += cells[sx][ry];
                    }

                }
                zaehlen -= cells[x][y];
                return zaehlen;
            }

            function regeln() {
                var newCells = [];
                for(var i = 0; i < size; i++){
                    newCells.push(new Array(size).fill(EMPTY));
                }
                for(var x = 0; x < size; x++){
                    for(var y = 0; y < size; y++){
                        var nachbarn = nachbarnZaehlen(x, y); 
                        if(cells[x][y] == ALIVE && nachbarn == 2 || nachbarn == 3 ){
                            newCells[x][y] =ALIVE;
                        }
                        if(cells[x][y] == EMPTY && nachbarn == 3){
                            newCells = ALIVE;
                        }
                    }
                }
                cells = newCells;
                draw();
            }

            function init(){
                createField();
                for(var i = 0; i < Math.floor(size*size*0.3);i++){
                    var x , y;
                    do{
                        x = Math.floor(Math.random()*size), y = Math.floor(Math.random()*size);
                        if(cells[x][y] == EMPTY){
                            cells[x][y] = ALIVE;
                            break;
                        }
                    }while(true);
                    
                }
                draw();
                setInterval(regeln(), 100); 
            }
            
           init();
        </script>         
    </body>
</html>


        

            
            
        
            
            
       
    
        
        
        
    